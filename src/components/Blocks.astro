---
import Default from '@components/blocks/Default.astro'
import BlockPost from '@components/blocks/Posts.astro'
import BlockText from '@components/blocks/Text.astro'
import BlockSection from '@components/blocks/Section.astro'
import { prepareBlocks } from '@util/helpers'
const { page, wrapperClass } = Astro.props
let { blocks, variant = "default" } = Astro.props
blocks = prepareBlocks(blocks, variant).map((block, index) => {
  let Component = Default
  switch (block.layout) {
    case "posts":
      Component = BlockPosts
      break;
    case "text":
      Component = BlockText
      break;
    case "section":
      Component = BlockSection
      break;
    default:
      break;
  }
  return {
    ...block,
    Component,
  }
})

---
{blocks.map(block => (
  <div class={wrapperClass}>
    <block.Component {block} {page} />
  </div>
))}