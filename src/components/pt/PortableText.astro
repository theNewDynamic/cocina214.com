---
import type { PortableTextProps } from "astro-portabletext/types";
import { PortableText } from "astro-portabletext";
// Custom components
import Table from "@components/pt/Table.astro";
import Image from "@components/pt/Image.astro";
import HTML from "@components/pt/HTML.astro"
import IubendaContent from "@components/pt/IubendaContent.astro"
import MailchimpForm from "@components/pt/MailchimpForm.astro"
import Video from "@components/pt/Video.astro";
import BlockFiles from "./BlockFiles.astro";
import BlockLinks from "./BlockLinks.astro";
import BlockLocation from "./BlockLocation.astro";
// Lib
import { mergeComponents } from "astro-portabletext/utils";
import Block from "./Block.astro";


export interface Props {
  value: PortableTextProps["value"];
  components?: PortableTextProps["components"];
}

const { value, components: overrideComponents = {} } = Astro.props;

const components = mergeComponents({
  type: {
    table: Table,
    image: Image,
    blockIubenda: IubendaContent,
    blockVideo: Video,
    blockHTML: HTML,
    blockMailchimp: MailchimpForm,
    blockFiles: BlockFiles,
    blockLinks: BlockLinks,
    blockLocation: BlockLocation,
  },
  //block: MyBlock,
}, overrideComponents)
---

<PortableText value={value} components={components} />